!function(a,b,c,d){"use strict";function e(b,c){this.element=b,this.settings=a.extend({},l,c),this._defaults=l,this._name=k,this.root=a(b),this.wrap=d,this.hotspotContainer=d,this.hotspotSvgContainer=d,this.visibleTooltip=d,this.activeSpot=d,this.visibleTooltipWidth=0,this.visibleTooltipHeight=0,this.wrapOffsetLeft=0,this.wrapOffsetTop=0,this.wrapWidth=0,this.wrapHeight=0,this.activeSpotIndex=0,this.activeSpotX=d,this.activeSpotY=d,this.activeSpotWidth=d,this.activeSpotHeight=d,this.touch=!1,this.init()}function f(a){var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return b?{r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)}:null}function g(a,b,c,d,e,f){return a>c&&c+e>a&&b>d&&d+f>b?!0:!1}function h(a,b){for(var c=a.x,d=a.y,e=!1,f=0,g=b.length-1;f<b.length;g=f++){var h=b[f][0],i=b[f][1],j=b[g][0],k=b[g][1],l=i>d!=k>d&&(j-h)*(d-i)/(k-i)+h>c;l&&(e=!e)}return e}function i(c,d,e,f){return 0>c&&(c=0),0>d&&(d=0),c>a(b).width()-e&&(c=a(b).width()-e),d>a(b).height()-f&&(d=a(b).height()-f),{x:c,y:d}}function j(a){for(var b,c,d=a.length;0!==d;)c=Math.floor(Math.random()*d),d-=1,b=a[d],a[d]=a[c],a[c]=b;return a}var k="imageMapPro",l={propertyName:"value"},m=d;a.extend(e.prototype,{init:function(){var c=this;m=this,this.id=100*Math.random(),c.root.html('<div class="hs-wrap"></div>'),c.wrap=c.root.find(".hs-wrap");var d=new Image;d.src=c.settings.general.image_url,c.loadImage(d,function(){},function(){var a="";a+='<img style="'+c.getImageStyle()+'" src="'+c.settings.general.image_url+'">',c.wrap.html(a),c.adjustSize(),c.drawHotspots(),c.addTooltips(),c.setTooltipSizes(),c.events(),c.animateHotspotsLoop(),c.wrapOffsetLeft=c.wrap.offset().left,c.wrapOffsetTop=c.wrap.offset().top,c.wrapWidth=c.wrap.width(),c.wrapHeight=c.wrap.height()}),a(b).on("resize",function(){c.adjustSize(),c.wrapOffsetLeft=c.wrap.offset().left,c.wrapOffsetTop=c.wrap.offset().top,c.wrapWidth=c.wrap.width(),c.wrapHeight=c.wrap.height()})},loadImage:function(b,c,e){b.complete&&b.naturalWidth!==d&&b.naturalHeight!==d?e():(c(),a(b).on("load",function(){a(b).off("load"),e()}))},adjustSize:function(){var a=this;if(1==parseInt(a.settings.general.responsive,10)){for(var b=a.root.width(),c=a.root;0==b&&(c=c.parent(),b=c.width(),!c.is("body")););var d=a.settings.general.width/a.settings.general.height;a.wrap.css({width:b,height:b/d})}else a.wrap.css({width:a.settings.general.width,height:a.settings.general.height})},getImageStyle:function(){var a="";return a+="width: 100%;",a+="height: 100%;"},drawHotspots:function(){for(var a=this,b=0;b<a.settings.spots.length;b++){var c=a.settings.spots[b];if(c.x=parseFloat(c.x),c.y=parseFloat(c.y),c.width=parseFloat(c.width),c.height=parseFloat(c.height),c.default_style.stroke_width=parseInt(c.default_style.stroke_width),c.mouseover_style.stroke_width=parseInt(c.mouseover_style.stroke_width),"poly"==c.type)for(var d=0;d<c.points.length;d++)c.points[d].x=parseFloat(c.points[d].x),c.points[d].y=parseFloat(c.points[d].y)}a.settings.general.width=parseInt(a.settings.general.width),a.settings.general.height=parseInt(a.settings.general.height),a.wrap.prepend('<div class="hs-hotspot-container"></div>'),a.hotspotContainer=a.wrap.find(".hs-hotspot-container");for(var e="",g=!1,h='<svg class="hs-poly-svg" viewBox="0 0 '+a.settings.general.width+" "+a.settings.general.height+'" preserveAspectRatio="none">',b=0;b<a.settings.spots.length;b++){var c=a.settings.spots[b];if("spot"==c.type)if(1==parseInt(c.default_style.use_icon,10)){var i="";if(i+="left: "+c.x+"%;",i+="top: "+c.y+"%;",i+="width: "+c.width+"px;",i+="height: "+c.height+"px;",i+="margin-left: -"+c.width/2+"px;",i+=1==parseInt(c.default_style.icon_is_pin,10)?"margin-top: -"+c.height+"px;":"margin-top: -"+c.height/2+"px;",i+="background-image: url("+c.default_style.icon_url+")",i+="background-position: center;",i+="background-repeat: no-repeat;","fade"==a.settings.general.pageload_animation&&(i+="opacity: 0;"),"grow"==a.settings.general.pageload_animation&&(i+="opacity: "+c.default_style.opacity+";",i+="transform: scale(0, 0);-moz-transform: scale(0, 0);-webkit-transform: scale(0, 0);",1==parseInt(c.default_style.icon_is_pin,10)&&(i+="transform-origin: 50% 100%;-moz-transform-origin: 50% 100%;-webkit-transform-origin: 50% 100%;")),"none"==a.settings.general.pageload_animation&&(i+="opacity: "+c.default_style.opacity+";"),e+='<div class="hs-hotspot hs-hotspot-spot" id="'+c.id+'" style="'+i+'" data-index='+b+">","library"==c.default_style.icon_type?(e+='   <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="'+c.default_style.icon_svg_viewbox+'" xml:space="preserve" width="'+c.width+'px" height="'+c.height+'px">',e+='       <path style="fill:'+c.default_style.icon_fill+'" d="'+c.default_style.icon_svg_path+'"></path>',e+="   </svg>"):e+='<img src="'+c.default_style.icon_url+'">',1==parseInt(c.default_style.icon_shadow,10)){var j="";j+="width: "+c.width+"px;",j+="height: "+c.height+"px;",j+="top: "+c.height/2+"px;",e+='<div style="'+j+'" class="hs-hotspot-icon-shadow"></div>'}e+="</div>"}else{var i="",k=f(c.default_style.background_color),l=f(c.default_style.border_color);i+="left: "+c.x+"%;",i+="top: "+c.y+"%;",i+="width: "+c.width+"px;",i+="height: "+c.height+"px;",i+="margin-left: -"+c.width/2+"px;",i+="margin-top: -"+c.height/2+"px;",i+="border-radius: "+c.default_style.border_radius+"px;",i+="background: rgba("+k.r+", "+k.g+", "+k.b+", "+c.default_style.background_opacity+");",i+="border-width: "+c.default_style.border_width+"px;",i+="border-style: "+c.default_style.border_style+";",i+="border-color: rgba("+l.r+", "+l.g+", "+l.b+", "+c.default_style.border_opacity+");","fade"==a.settings.general.pageload_animation&&(i+="opacity: 0;"),"grow"==a.settings.general.pageload_animation&&(i+="opacity: "+c.default_style.opacity+";",i+="transform: scale(0, 0);-moz-transform: scale(0, 0);-webkit-transform: scale(0, 0);"),"none"==a.settings.general.pageload_animation&&(i+="opacity: "+c.default_style.opacity+";"),e+='<div class="hs-hotspot hs-hotspot-spot" id="'+c.id+'" style="'+i+'" data-index='+b+"></div>"}if("rect"==c.type){var i="",k=f(c.default_style.background_color),l=f(c.default_style.border_color);i+="left: "+c.x+"%;",i+="top: "+c.y+"%;",i+="width: "+c.width+"%;",i+="height: "+c.height+"%;",i+="border-radius: "+c.default_style.border_radius+"px;",i+="background: rgba("+k.r+", "+k.g+", "+k.b+", "+c.default_style.background_opacity+");",i+="border-width: "+c.default_style.border_width+"px;",i+="border-style: "+c.default_style.border_style+";",i+="border-color: rgba("+l.r+", "+l.g+", "+l.b+", "+c.default_style.border_opacity+");","fade"==a.settings.general.pageload_animation&&(i+="opacity: 0;"),"grow"==a.settings.general.pageload_animation&&(i+="opacity: "+c.default_style.opacity+";",i+="transform: scale(0, 0);-moz-transform: scale(0, 0);-webkit-transform: scale(0, 0);"),"none"==a.settings.general.pageload_animation&&(i+="opacity: "+c.default_style.opacity+";"),e+='<div class="hs-hotspot hs-hotspot-rect" id="'+c.id+'" style="'+i+'" data-index='+b+"></div>"}if("oval"==c.type){var i="",k=f(c.default_style.background_color),l=f(c.default_style.border_color);i+="left: "+c.x+"%;",i+="top: "+c.y+"%;",i+="width: "+c.width+"%;",i+="height: "+c.height+"%;",i+="border-radius: 50% 50%;",i+="background: rgba("+k.r+", "+k.g+", "+k.b+", "+c.default_style.background_opacity+");",i+="border-width: "+c.default_style.border_width+"px;",i+="border-style: "+c.default_style.border_style+";",i+="border-color: rgba("+l.r+", "+l.g+", "+l.b+", "+c.default_style.border_opacity+");","fade"==a.settings.general.pageload_animation&&(i+="opacity: 0;"),"grow"==a.settings.general.pageload_animation&&(i+="opacity: "+c.default_style.opacity+";",i+="transform: scale(0, 0);-moz-transform: scale(0, 0);-webkit-transform: scale(0, 0);"),"none"==a.settings.general.pageload_animation&&(i+="opacity: "+c.default_style.opacity+";"),e+='<div class="hs-hotspot hs-hotspot-oval" id="'+c.id+'" style="'+i+'" data-index='+b+"></div>"}if("poly"==c.type){g=!0;var m=f(c.default_style.fill),n=f(c.default_style.stroke_color),o="";if(o+="width: 100%;",o+="height: 100%;",o+="fill: rgba("+m.r+", "+m.g+", "+m.b+", "+c.default_style.fill_opacity+");",o+="stroke: rgba("+n.r+", "+n.g+", "+n.b+", "+c.default_style.stroke_opacity+");",o+="stroke-width: "+c.default_style.stroke_width+"px;",o+="stroke-dasharray: "+c.default_style.stroke_dasharray+";",o+="stroke-linecap: "+c.default_style.stroke_linecap+";","fade"==a.settings.general.pageload_animation&&(o+="opacity: 0;"),"grow"==a.settings.general.pageload_animation){o+="opacity: "+c.default_style.opacity+";",o+="transform: scale(0, 0);-moz-transform: scale(0, 0);-webkit-transform: scale(0, 0);";var p=c.x+c.width/2,q=c.y+c.height/2;o+="transform-origin: "+p+"% "+q+"%;-moz-transform-origin: "+p+"% "+q+"%;-webkit-transform-origin: "+p+"% "+q+"%;"}"none"==a.settings.general.pageload_animation&&(o+="opacity: "+c.default_style.opacity+";");var r=a.settings.general.width*(c.width/100),s=a.settings.general.height*(c.height/100);h+='           <polygon class="hs-hotspot hs-hotspot-poly" style="'+o+'" data-index='+b+' id="'+c.id+'" points="',c.vs=new Array;for(var d=0;d<c.points.length;d++){var t=a.settings.general.width*(c.x/100)+c.default_style.stroke_width+c.points[d].x/100*(r-2*c.default_style.stroke_width),u=a.settings.general.height*(c.y/100)+c.default_style.stroke_width+c.points[d].y/100*(s-2*c.default_style.stroke_width);h+=t+","+u+" ",c.vs.push([t,u])}h+='           "></polygon>'}}h+="</svg>",g?a.hotspotContainer.html(e+h):a.hotspotContainer.html(e)},addTooltips:function(){for(var a=this,b="",c=0;c<a.settings.spots.length;c++){var d=a.settings.spots[c],e="",g=f(d.tooltip_style.background_color),h="poly"==d.type?"hs-tooltip-buffer-large":"";if(e+="border-radius: "+d.tooltip_style.border_radius+"px;",e+="padding: "+d.tooltip_style.padding+"px;",e+="background: rgba("+g.r+", "+g.g+", "+g.b+", "+d.tooltip_style.background_opacity+");","none"==a.settings.general.tooltip_animation&&(e+="opacity: 0;"),"fade"==a.settings.general.tooltip_animation&&(e+="opacity: 0;",e+="transition-property: opacity;-moz-transition-property: opacity;-webkit-transition-property: opacity;"),"grow"==a.settings.general.tooltip_animation&&(e+="transform: scale(0, 0);-moz-transform: scale(0, 0);-webkit-transform: scale(0, 0);",e+="transition-property: transform;-moz-transition-property: -moz-transform;-webkit-transition-property: -webkit-transform;","top"==d.tooltip_style.position&&(e+="transform-origin: 50% 100%;-moz-transform-origin: 50% 100%;-webkit-transform-origin: 50% 100%;"),"bottom"==d.tooltip_style.position&&(e+="transform-origin: 50% 0%;-moz-transform-origin: 50% 0%;-webkit-transform-origin: 50% 0%;"),"left"==d.tooltip_style.position&&(e+="transform-origin: 100% 50%;-moz-transform-origin: 100% 50%;-webkit-transform-origin: 100% 50%;"),"right"==d.tooltip_style.position&&(e+="transform-origin: 0% 50%;-moz-transform-origin: 0% 50%;-webkit-transform-origin: 0% 50%;")),b+='<div class="hs-tooltip" style="'+e+'" data-index="'+c+'">',"top"==d.tooltip_style.position&&(b+='   <div class="hs-arrow hs-arrow-bottom" style="border-top-color: rgba('+g.r+", "+g.g+", "+g.b+", "+d.tooltip_style.background_opacity+');"></div>',0==parseInt(a.settings.general.sticky_tooltips,10)&&(b+='   <div class="hs-tooltip-buffer hs-tooltip-buffer-bottom '+h+'"></div>')),"bottom"==d.tooltip_style.position&&(b+='   <div class="hs-arrow hs-arrow-top" style="border-bottom-color: rgba('+g.r+", "+g.g+", "+g.b+", "+d.tooltip_style.background_opacity+');"></div>',0==parseInt(a.settings.general.sticky_tooltips,10)&&(b+='   <div class="hs-tooltip-buffer hs-tooltip-buffer-top '+h+'"></div>')),"left"==d.tooltip_style.position&&(b+='   <div class="hs-arrow hs-arrow-right" style="border-left-color: rgba('+g.r+", "+g.g+", "+g.b+", "+d.tooltip_style.background_opacity+');"></div>',0==parseInt(a.settings.general.sticky_tooltips,10)&&(b+='   <div class="hs-tooltip-buffer hs-tooltip-buffer-right '+h+'"></div>')),"right"==d.tooltip_style.position&&(b+='   <div class="hs-arrow hs-arrow-left" style="border-right-color: rgba('+g.r+", "+g.g+", "+g.b+", "+d.tooltip_style.background_opacity+');"></div>',0==parseInt(a.settings.general.sticky_tooltips,10)&&(b+='   <div class="hs-tooltip-buffer hs-tooltip-buffer-left '+h+'"></div>')),d.tooltip_content.title.length>0){var e="";e+="color: "+d.text_style.title_color+";",e+="font-size: "+d.text_style.title_font_size+"px;",e+="font-family: "+d.text_style.title_font_family+";",e+="font-weight: "+d.text_style.title_font_weight+";",e+="line-height: "+d.text_style.title_line_height+"px;",d.tooltip_content.text.length>0&&(e+="margin-bottom: 20px;"),b+='<h3 style="'+e+'">'+d.tooltip_content.title+"</h3>"}if(d.tooltip_content.text.length>0){var e="";e+="color: "+d.text_style.text_color+";",e+="font-size: "+d.text_style.text_font_size+"px;",e+="font-family: "+d.text_style.text_font_family+";",e+="font-weight: "+d.text_style.text_font_weight+";",e+="line-height: "+d.text_style.text_line_height+"px;",b+='<p style="'+e+'">'+d.tooltip_content.text+"</p>"}b+="</div>"}a.wrap.prepend(b)},setTooltipSizes:function(){for(var b=this,c=0;c<b.settings.spots.length;c++){var d=b.settings.spots[c],e=a('.hs-tooltip[data-index="'+c+'"]');0==parseInt(d.tooltip_style.auto_width,10)?e.css({width:d.tooltip_style.width}):e.css({width:e.outerWidth()}),0==parseInt(d.tooltip_style.auto_height,10)?e.css({height:d.tooltip_style.height}):e.css({height:e.outerHeight()})}},events:function(){var e=this;a("body").on("touchstart",function(){e.touch=!0}),e.wrap.find(".hs-hotspot-spot, .hs-hotspot-rect, .hs-hotspot-oval, .hs-poly-svg polygon").on("mouseover",function(b){if(!e.touch){var c=e.getEventCoordinates(b);if(!a(this).hasClass("hs-mouseover")){a(".hs-mouseover").removeClass("hs-mouseover"),a(this).addClass("hs-mouseover"),e.unhighlightSpot(),e.highlightSpot(a(this).data("index")),"show-tooltip"==e.settings.spots[e.activeSpotIndex].actions.mouseover&&(e.hideTooltip(),e.showTooltip(e.activeSpotIndex,c.x,c.y,!1));var d=a('.hs-hotspot[data-index="'+e.activeSpotIndex+'"]');e.activeSpotX=d.offset().left,e.activeSpotY=d.offset().top,e.activeSpotWidth=d.outerWidth(),e.activeSpotHeight=d.outerHeight()}}}),e.wrap.find(".hs-hotspot-spot, .hs-hotspot-rect, .hs-hotspot-oval, .hs-poly-svg polygon").on("mouseout",function(b){if(!e.touch){var c=e.getEventCoordinates(b);if("show-tooltip"!=e.settings.spots[e.activeSpotIndex].actions.click&&1!=parseInt(e.settings.general.sticky_tooltips,10)){if("show-tooltip"==e.settings.spots[e.activeSpotIndex].actions.mouseover){var d,f,i,j;if("top"==e.activeSpot.tooltip_style.position&&(d=e.visibleTooltip.offset().left,f=e.visibleTooltip.offset().top,i=e.visibleTooltipWidth,j=e.visibleTooltipHeight+20),"bottom"==e.activeSpot.tooltip_style.position&&(d=e.visibleTooltip.offset().left,f=e.visibleTooltip.offset().top-20,i=e.visibleTooltipWidth,j=e.visibleTooltipHeight+20),"left"==e.activeSpot.tooltip_style.position&&(d=e.visibleTooltip.offset().left,f=e.visibleTooltip.offset().top,i=e.visibleTooltipWidth+20,j=e.visibleTooltipHeight),"right"==e.activeSpot.tooltip_style.position&&(d=e.visibleTooltip.offset().left-20,f=e.visibleTooltip.offset().top,i=e.visibleTooltipWidth+20,j=e.visibleTooltipHeight),g(c.x,c.y,d,f,i,j))return;if("poly"==e.activeSpot.type){var k=c.x-e.wrapOffsetLeft,l=c.y-e.wrapOffsetTop;if(k=k*e.settings.general.width/e.wrapWidth,l=l*e.settings.general.height/e.wrapHeight,h({x:k,y:l},e.activeSpot.vs))return}}a(".hs-mouseover").removeClass("hs-mouseover"),e.unhighlightSpot(),e.hideTooltip()}}}),e.wrap.find(".hs-tooltip").on("mouseout",function(b){if(!e.touch){var c=e.getEventCoordinates(b);if("show-tooltip"!=e.settings.spots[e.activeSpotIndex].actions.click){var d=a(this).offset().left,f=a(this).offset().top,h=a(this).outerWidth(),i=a(this).outerHeight(),j=e.settings.spots[a(this).data("index")];"top"==j.tooltip_style.position&&(i+=20),"bottom"==j.tooltip_style.position&&(f-=20,i+=20),"left"==j.tooltip_style.position&&(h+=20),"right"==j.tooltip_style.position&&(d-=20,h+=20),g(c.x,c.y,d,f,h,i)||(a(".hs-mouseover").removeClass("hs-mouseover"),e.unhighlightSpot(),e.hideTooltip())}}}),1==parseInt(e.settings.general.sticky_tooltips,10)&&e.wrap.on("mousemove",function(b){if(!e.touch&&e.activeSpot){var c=e.getEventCoordinates(b);if(e.visibleTooltip&&"show-tooltip"==e.activeSpot.actions.mouseover){var d=c.x-e.wrapOffsetLeft,f=c.y-e.wrapOffsetTop,i=0,j=0;e.updateTooltipPosition(e.visibleTooltip,e.visibleTooltipWidth,e.visibleTooltipHeight,d,f,i,j,20)}if("poly"==e.activeSpot.type){var k=c.x-e.wrapOffsetLeft,l=c.y-e.wrapOffsetTop;if(k=k*e.settings.general.width/e.wrapWidth,l=l*e.settings.general.height/e.wrapHeight,h({x:k,y:l},e.activeSpot.vs))return}else if(g(c.x,c.y,e.activeSpotX,e.activeSpotY,e.activeSpotWidth,e.activeSpotHeight))return;a(".hs-mouseover").removeClass("hs-mouseover"),e.unhighlightSpot(),e.hideTooltip()}}),e.wrap.find(".hs-hotspot-spot, .hs-hotspot-rect, .hs-hotspot-oval, .hs-poly-svg polygon").on("click",function(c){if(!e.touch){var d=e.settings.spots[a(this).data("index")];"follow-link"==d.actions.click&&(1==parseInt(d.actions.open_link_in_new_window)?b.open(d.actions.link,"_blank"):b.location=d.actions.link),"show-tooltip"==d.actions.click&&(e.hideTooltip(),e.showTooltip(e.activeSpotIndex,0,0,!0))}}),e.wrap.on("click",function(b){e.touch||(a(b.target).hasClass("hs-hotspot-container")||a(b.target).is("svg"))&&(a(".hs-mouseover").removeClass("hs-mouseover"),e.unhighlightSpot(),e.hideTooltip())}),e.wrap.find(".hs-hotspot-spot, .hs-hotspot-rect, .hs-hotspot-oval, .hs-poly-svg polygon").on("touchstart",function(b){e.touch=!0;var c=e.getEventCoordinates(b);if(!a(this).hasClass("hs-mouseover")){a(".hs-mouseover").removeClass("hs-mouseover"),a(this).addClass("hs-mouseover"),e.unhighlightSpot(),e.highlightSpot(a(this).data("index")),"show-tooltip"==e.settings.spots[e.activeSpotIndex].actions.mouseover&&(e.hideTooltip(),e.showTooltip(e.activeSpotIndex,c.x,c.y,!1));var d=a('.hs-hotspot[data-index="'+e.activeSpotIndex+'"]');e.activeSpotX=d.offset().left,e.activeSpotY=d.offset().top,e.activeSpotWidth=d.outerWidth(),e.activeSpotHeight=d.outerHeight()}return!1}),e.wrap.on("touchmove",function(b){e.touch=!0;for(var c=e.getEventCoordinates(b),d=!1,f=0;f<e.settings.spots.length;f++){var i=e.settings.spots[f];if("poly"==i.type){var j=c.x-e.wrapOffsetLeft,k=c.y-e.wrapOffsetTop;if(j=j*e.settings.general.width/e.wrapWidth,k=k*e.settings.general.height/e.wrapHeight,h({x:j,y:k},i.vs)){e.unhighlightSpot(),e.highlightSpot(f),e.hideTooltip(),"show-tooltip"==i.actions.mouseover&&e.showTooltip(f,c.x,c.y,!1),d=!0;break}}else{var l=a("#"+i.id),j=l.offset().left,k=l.offset().top,m=l.outerWidth(),n=l.outerHeight();if(g(c.x,c.y,j,k,m,n)){e.unhighlightSpot(),e.highlightSpot(f),e.hideTooltip(),"show-tooltip"==i.actions.mouseover&&e.showTooltip(f,c.x,c.y,!1),d=!0;break}}}if(d||(e.unhighlightSpot(),e.hideTooltip()),e.visibleTooltip&&"show-tooltip"==e.activeSpot.actions.mouseover&&1==parseInt(e.settings.general.sticky_tooltips,10)){var o=c.x-e.wrapOffsetLeft,p=c.y-e.wrapOffsetTop,q=0,r=0;e.updateTooltipPosition(e.visibleTooltip,e.visibleTooltipWidth,e.visibleTooltipHeight,o,p,q,r,20)}}),e.wrap.find(".hs-hotspot-spot, .hs-hotspot-rect, .hs-hotspot-oval, .hs-poly-svg polygon").on("touchend",function(c){var f=e.settings.spots[a(this).data("index")];return"follow-link"==f.actions.click&&(1==parseInt(f.actions.open_link_in_new_window)?b.open(f.actions.link,"_blank"):b.location=f.actions.link),"show-tooltip"==f.actions.click&&(e.hideTooltip(),e.activeSpotIndex!=d&&e.showTooltip(e.activeSpotIndex,0,0,!0)),!1}),e.wrap.on("touchend",function(b){return(a(b.target).hasClass("hs-hotspot-container")||a(b.target).is("svg"))&&(a(".hs-mouseover").removeClass("hs-mouseover"),e.unhighlightSpot(),e.hideTooltip()),!1}),a(c).on("click","[data-open-spot]",function(){for(var b=a(this).data("open-spot"),c=0;c<e.settings.spots.length;c++){var d=e.settings.spots[c];d.id==b&&(e.hideTooltip(),e.unhighlightSpot(),e.highlightSpot(c),("show-tooltip"==d.actions.mouseover||"show-tooltip"==d.actions.click)&&e.showTooltip(c,0,0,!0))}})},animateHotspotsLoop:function(){var a=this;if("none"!=a.settings.general.pageload_animation)for(var b=750/a.settings.spots.length,c=j(a.settings.spots.slice()),d=0;d<c.length;d++)a.animateHotspot(c[d],b*d)},animateHotspot:function(b,c){var d=this,e=a("#"+b.id);setTimeout(function(){"fade"==d.settings.general.pageload_animation&&e.css({opacity:b.default_style.opacity}),"grow"==d.settings.general.pageload_animation&&e.css({transform:"scale(1, 1)","-moz-transform":"scale(1, 1)","-webkit-transform":"scale(1, 1)"})},c)},getEventCoordinates:function(a){var b,c,d=this;return d.touch?(b=a.originalEvent.touches[0].pageX,c=a.originalEvent.touches[0].pageY):(b=a.pageX,c=a.pageY),{x:b,y:c}},applyMouseoverStyles:function(b){var c=this,d=c.settings.spots[b];if("spot"!=d.type||1!=parseInt(d.default_style.use_icon,10)){var e=a("#"+d.id),g="";if("spot"==d.type&&0==parseInt(d.default_style.use_icon,10)){var h=f(d.mouseover_style.background_color),i=f(d.mouseover_style.border_color);g+="left: "+d.x+"%;",g+="top: "+d.y+"%;",g+="width: "+d.width+"px;",g+="height: "+d.height+"px;",g+="margin-left: -"+d.width/2+"px;",g+="margin-top: -"+d.height/2+"px;",g+="opacity: "+d.mouseover_style.opacity+";",g+="border-radius: "+d.mouseover_style.border_radius+"px;",g+="background: rgba("+h.r+", "+h.g+", "+h.b+", "+d.mouseover_style.background_opacity+");",g+="border-width: "+d.mouseover_style.border_width+"px;",g+="border-style: "+d.mouseover_style.border_style+";",g+="border-color: rgba("+i.r+", "+i.g+", "+i.b+", "+d.mouseover_style.border_opacity+");"}if("rect"==d.type){var h=f(d.mouseover_style.background_color),i=f(d.mouseover_style.border_color);g+="left: "+d.x+"%;",g+="top: "+d.y+"%;",g+="width: "+d.width+"%;",g+="height: "+d.height+"%;",g+="opacity: "+d.mouseover_style.opacity+";",g+="border-radius: "+d.mouseover_style.border_radius+"px;",g+="background: rgba("+h.r+", "+h.g+", "+h.b+", "+d.mouseover_style.background_opacity+");",g+="border-width: "+d.mouseover_style.border_width+"px;",g+="border-style: "+d.mouseover_style.border_style+";",g+="border-color: rgba("+i.r+", "+i.g+", "+i.b+", "+d.mouseover_style.border_opacity+");"}if("oval"==d.type){var h=f(d.mouseover_style.background_color),i=f(d.mouseover_style.border_color);g+="left: "+d.x+"%;",g+="top: "+d.y+"%;",g+="width: "+d.width+"%;",g+="height: "+d.height+"%;",g+="opacity: "+d.mouseover_style.opacity+";",g+="border-radius: 50% 50%;",g+="background: rgba("+h.r+", "+h.g+", "+h.b+", "+d.mouseover_style.background_opacity+");",g+="border-width: "+d.mouseover_style.border_width+"px;",g+="border-style: "+d.mouseover_style.border_style+";",g+="border-color: rgba("+i.r+", "+i.g+", "+i.b+", "+d.mouseover_style.border_opacity+");"}if("poly"==d.type){var j=f(d.mouseover_style.fill),k=f(d.mouseover_style.stroke_color);g+="opacity: "+d.mouseover_style.opacity+";",g+="fill: rgba("+j.r+", "+j.g+", "+j.b+", "+d.mouseover_style.fill_opacity+");",g+="stroke: rgba("+k.r+", "+k.g+", "+k.b+", "+d.mouseover_style.stroke_opacity+");",g+="stroke-width: "+d.mouseover_style.stroke_width+"px;",g+="stroke-dasharray: "+d.mouseover_style.stroke_dasharray+";",g+="stroke-linecap: "+d.mouseover_style.stroke_linecap+";"}e.attr("style",g)}},applyDefaultStyles:function(b){var c=this,d=c.settings.spots[b];if("spot"!=d.type||1!=parseInt(d.default_style.use_icon,10)){var e=a("#"+d.id),g="";if("spot"==d.type&&0==parseInt(d.default_style.use_icon,10)){var h=f(d.default_style.background_color),i=f(d.default_style.border_color);g+="left: "+d.x+"%;",g+="top: "+d.y+"%;",g+="width: "+d.width+"px;",g+="height: "+d.height+"px;",g+="margin-left: -"+d.width/2+"px;",g+="margin-top: -"+d.height/2+"px;",g+="opacity: "+d.default_style.opacity+";",g+="border-radius: "+d.default_style.border_radius+"px;",g+="background: rgba("+h.r+", "+h.g+", "+h.b+", "+d.default_style.background_opacity+");",g+="border-width: "+d.default_style.border_width+"px;",g+="border-style: "+d.default_style.border_style+";",g+="border-color: rgba("+i.r+", "+i.g+", "+i.b+", "+d.default_style.border_opacity+");"}if("rect"==d.type){var h=f(d.default_style.background_color),i=f(d.default_style.border_color);g+="left: "+d.x+"%;",g+="top: "+d.y+"%;",g+="width: "+d.width+"%;",g+="height: "+d.height+"%;",g+="opacity: "+d.default_style.opacity+";",g+="border-radius: "+d.default_style.border_radius+"px;",g+="background: rgba("+h.r+", "+h.g+", "+h.b+", "+d.default_style.background_opacity+");",g+="border-width: "+d.default_style.border_width+"px;",g+="border-style: "+d.default_style.border_style+";",g+="border-color: rgba("+i.r+", "+i.g+", "+i.b+", "+d.default_style.border_opacity+");"}if("oval"==d.type){var h=f(d.default_style.background_color),i=f(d.default_style.border_color);g+="left: "+d.x+"%;",g+="top: "+d.y+"%;",g+="width: "+d.width+"%;",g+="height: "+d.height+"%;",g+="opacity: "+d.default_style.opacity+";",g+="border-radius: 50% 50%;",g+="background: rgba("+h.r+", "+h.g+", "+h.b+", "+d.default_style.background_opacity+");",g+="border-width: "+d.default_style.border_width+"px;",g+="border-style: "+d.default_style.border_style+";",g+="border-color: rgba("+i.r+", "+i.g+", "+i.b+", "+d.default_style.border_opacity+");"}if("poly"==d.type){var j=f(d.default_style.fill),k=f(d.default_style.stroke_color);g+="opacity: "+d.default_style.opacity+";",g+="fill: rgba("+j.r+", "+j.g+", "+j.b+", "+d.default_style.fill_opacity+");",g+="stroke: rgba("+k.r+", "+k.g+", "+k.b+", "+d.default_style.stroke_opacity+");",g+="stroke-width: "+d.default_style.stroke_width+"px;",g+="stroke-dasharray: "+d.default_style.stroke_dasharray+";",g+="stroke-linecap: "+d.default_style.stroke_linecap+";"}e.attr("style",g)}},highlightSpot:function(a){var b=this;b.activeSpotIndex=a,b.activeSpot=b.settings.spots[b.activeSpotIndex],b.applyMouseoverStyles(b.activeSpotIndex)},unhighlightSpot:function(){var a=this;a.activeSpotIndex!=d&&(a.applyDefaultStyles(a.activeSpotIndex),a.activeSpot=d,a.activeSpotIndex=d)},showTooltip:function(a,b,c,d){var e=this;e.visibleTooltip=e.wrap.find('.hs-tooltip[data-index="'+a+'"]');var f,g,h,i,j=e.settings.spots[a];1!=parseInt(e.settings.general.sticky_tooltips,10)||d?"spot"==j.type?(f=j.width,g=j.height,h=Math.round(10*j.x)/10/100*e.wrap.width()-f/2,i=Math.round(10*j.y)/10/100*e.wrap.height()-g/2):(f=j.width/100*e.wrap.width(),g=j.height/100*e.wrap.height(),h=Math.round(10*j.x)/10/100*e.wrap.width(),i=Math.round(10*j.y)/10/100*e.wrap.height()):(h=b-e.wrapOffsetLeft,i=c-e.wrapOffsetTop,f=0,g=0),e.visibleTooltipWidth=e.visibleTooltip.outerWidth(),e.visibleTooltipHeight=e.visibleTooltip.outerHeight(),e.updateTooltipPosition(e.visibleTooltip,e.visibleTooltipWidth,e.visibleTooltipHeight,h,i,f,g,20),e.visibleTooltip.addClass("hs-tooltip-visible")},hideTooltip:function(){var b=this;a(".hs-tooltip-visible").removeClass("hs-tooltip-visible"),b.visibleTooltip=d},updateTooltipPosition:function(a,b,c,d,e,f,g,h){var j,k,l=this;"left"==l.activeSpot.tooltip_style.position&&(j=d-b-h,k=e+g/2-c/2),"right"==l.activeSpot.tooltip_style.position&&(j=d+f+h,k=e+g/2-c/2),"top"==l.activeSpot.tooltip_style.position&&(j=d+f/2-b/2,k=e-c-h),"bottom"==l.activeSpot.tooltip_style.position&&(j=d+f/2-b/2,k=e+g+h),"spot"==l.activeSpot.type&&1==parseInt(l.activeSpot.default_style.icon_is_pin,10)&&(k-=g/2);var m={x:j,y:k};1==parseInt(l.settings.general.constrain_tooltips,10)&&(m=i(j+l.wrapOffsetLeft,k+l.wrapOffsetTop,b,c),m.x-=l.wrapOffsetLeft,m.y-=l.wrapOffsetTop),a.css({left:m.x,top:m.y})}}),a.fn[k]=function(b){return this.each(function(){a.data(this,"plugin_"+k,new e(this,b))})},a.image_map_pro_highlight_spot=function(a){m&&(m.unhighlightSpot(),m.hideTooltip(),m.highlightSpot(a),m.showTooltip(a,0,0,!0))}}(jQuery,window,document);